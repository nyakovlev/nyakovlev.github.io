<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script>
			var scanListUbuntu = ["2"];
			var scanListWindows = [];
			$(document).ready(function() {
				if (typeof progressData !== 'undefined') {
					alert(progressData);
					revealModules("ubuntu", progressData);
				}
			});
			function revealModules(os, dataList) {
				var osList;
				if (os == "ubuntu") {
					osList = scanListUbuntu;
				} else {
					osList = scanListWindows;
				}
				for (var i=0; i<osList.length; i++) {
					currTag = osList[i];
					currData = dataList[i];
					for (var j=0; j<currData.length; j++) {
						currPercDat = currData[j] * 100;
						dispPerc = currPercDat.toFixed(2) + "%"
						$("#" + j + "_" + currTag).css("width", dispPerc);
						if (currPercDat > 15) {
							//Assuming enough space for a text reveal
							$("#barText_" + j + "_" + osList[i]).html(dispPerc);
							$("#barText_" + j + "_" + osList[i]).css("color", "rgba(255, 255, 255, 1)");
						}
					}
					var masteryVal = (currData[2] + currData[3]) * 50;
					var compVal = (currData[0] + currData[1] + currData[2] + currData[3]) * 25;
					mRed = ((200 - masteryVal * 2) * 2.55);
					mGrn = (masteryVal * 2.55 * 2);
					if (mGrn > 255) {
						mGrn = 255;
					}
					mGrn -= 10;
					if (mGrn < 0) {
						mGrn = 0;
					}
					if (mRed > 255) {
						mRed = 255;
					}
					masteryColor = "rgba(" + mRed.toFixed(0) + ", " + mGrn.toFixed(0) + ", 0, 1)";
					$("#score_" + osList[i]).css("color", masteryColor);
					$("#score_" + osList[i]).html(masteryVal.toFixed(2) + "%");
					$("#comp_" + osList[i]).html(compVal.toFixed(2) + "%");
				}
			}
			function windowsBtn() {
				//fade out both windows, hide ubuntu & display windows, 
			}
		</script>
		<style>
			body {
				margin: 0px;
				padding: 0px;
				overflow: hidden;
			}
			.moduleBar {
				/*border: 1px solid #dddddd;*/
				width: 100%;
				height: 150px;
				margin: 10px auto;
			}
			.titleBox {
				/*background-color: #ffdddd;*/
				height: 100%;
				width: 200px;
				float: left;
				border-right: 1px solid #dddddd;
			}
			.barBox {
				/*background-color: #ddffdd;*/
				height: 100%;
				overflow: hidden;
			}
			.dataBox {
				/*background-color: #ddddff;*/
				border-left: 1px solid #dddddd;
				height: 100%;
				width: 250px;
				float: right;
			}
			.legend {
				width: 100%;
				margin: 15px;
				overflow: hidden;
			}
			.key {
				float: left;
				width: 100px;
			}
			.keyBox {
				width: 12px;
				height: 12px;
				margin: 1px 10px;
				float: left;
			}
			.keyText {
				font-family: "Open Sans", monospace;
				font-size: 12px;
			}
			.titleImg {
				margin: 5px auto;
				display: block;
			}
			.titleText {
				font-family: "Open Sans", monospace;
				margin: 5px;
				font-size: 16px;
				text-align: center;
			}
			.textField {
				width: 80px;
				height: 100%;
				background-color: #ffffdd;
				float: left;
			}
			.btnField {
				overflow: hidden;
				height: 100%;
			}
			.btn {
				margin: 30px auto;
				padding: 10px;
				width: 120px;
				background-color: #0077de;
				text-align: center;
				color: #ffffff;
				font-family: "Open Sans", monospace;
				font-weight: bold;
				cursor: pointer;
				-webkit-transition: 0.4s;
				transition: 0.4s;
			}
			.btn:hover {
				background-color: #4a98db;
			}
			.scoreLabel, .compLabel {
				text-align: center;
				font-family: "Open Sans", monospace;
				font-size: 20px;
				margin: 5px auto;
				color: #ababab;
			}
			.videoText, .textText, .labsText, .quizText {
				width: 100%;
				background-color: #ababab;
				height: 20px;
				font-family: "Open Sans", monospace;
				font-size: 14px;
				margin-top: 14px;
			}
			.videoBar, .textBar, .labsBar, .quizBar {
				margin-top: 14px;
				height: 20px;
				width: 0px;
				-webkit-transition: width 0.7s;
				transition: width 0.7s;
				box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.2);
				
			}
			#videoKey, .videoBar {
				background-color: #f24313;
			}
			#textKey, .textBar {
				background-color: #ffcc32;
			}
			#labsKey, .labsBar {
				background-color: #2cdb11;
			}
			#quizKey, .quizBar {
				background-color: #226ee8;
			}
			.barText {
				float: right;
				color: rgba(255, 255, 255, 0);
				font-family: "Open Sans", monospace;
				font-size: 14px;
				font-weight: bold;
				margin-right: 10px;
				-webkit-transition: color 0.7s;
				transition: color 0.7s;
			}
		</style>
	</head>
	<body>
		<div class="legend">
			<div class="key">
				<div class="keyBox" id="videoKey"></div>
				<div class="keyText">Videos</div>
			</div>
			<div class="key">
				<div class="keyBox" id="textKey"></div>
				<div class="keyText">Reading</div>
			</div>
			<div class="key">
				<!--<div class="keyBox" style="background-color: #52f213"></div>-->
				<div class="keyBox" id="labsKey"></div>
				<div class="keyText">Labs</div>
			</div>
			<div class="key">
				<div class="keyBox" id="quizKey"></div>
				<div class="keyText">Quizzes</div>
			</div>
		</div>
		<hr>
		<div class="moduleBar">
			<div class="titleBox">
				<img class="titleImg" src="https://nyakovlev.github.io/images/systemTasksUb.png"></img>
				<div class="titleText"><b>Module 2</b><br>Basic Ubuntu Security</div>
			</div>
			<div class="dataBox">
				<div class="btnField">
					<div class="scoreLabel">Mastery: <b id="score_2">20%</b></div>
					<div class="compLabel">Completion: <b id="comp_2">20%</b></div>
					<div class="btn">Study Module</div>
				</div>
			</div>
			<div class="barBox">
				<div class="videoBar" id="0_2">
					<div class="barText" id="barText_0_2">20%</div>
				</div>
				<div class="textBar" id="1_2">
					<div class="barText" id="barText_1_2">20%</div>
				</div>
				<div class="labsBar" id="2_2">
					<div class="barText" id="barText_2_2">20%</div>
				</div>
				<div class="quizBar" id="3_2">
					<div class="barText" id="barText_3_2">20%</div>
				</div>
			</div>
		</div>
		<hr>
	</body>
</html>
